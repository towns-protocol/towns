// SPDX-License-Identifier: CC0-1.0
pragma solidity >=0.8.13;

/**
 * @title IDelegateRegistry
 * @custom:version 2.0
 * @custom:author foobar (0xfoobar)
 * @notice A standalone immutable registry storing delegated permissions from one address to another
 * @dev This is a copy from the delegate.xyz v2 registry
 */
interface IDelegateRegistry {
  /// @notice Delegation type, NONE is used when a delegation does not exist or is revoked
  enum DelegationType {
    NONE,
    ALL,
    CONTRACT,
    ERC721,
    ERC20,
    ERC1155
  }

  /// @notice Struct for returning delegations
  struct Delegation {
    DelegationType type_;
    address to;
    address from;
    bytes32 rights;
    address contract_;
    uint256 tokenId;
    uint256 amount;
  }

  /**
   * ----------- CHECKS -----------
   */

  /**
   * @notice Check if `to` is a delegate of `from` for the entire wallet
   * @param to The potential delegate address
   * @param from The potential address who delegated rights
   * @param rights Specific rights to check for, pass the zero value to ignore subdelegations and check full delegations only
   * @return valid Whether delegate is granted to act on the from's behalf
   */
  function checkDelegateForAll(
    address to,
    address from,
    bytes32 rights
  ) external view returns (bool);

  /**
   * ----------- ENUMERATIONS -----------
   */

  /**
   * @notice Returns all enabled delegations a given delegate has received
   * @param to The address to retrieve delegations for
   * @return delegations Array of Delegation structs
   */
  function getIncomingDelegations(
    address to
  ) external view returns (Delegation[] memory delegations);
}
