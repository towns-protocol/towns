Running app-registry node with environment 'omega'
Profiling disabled
{"level":"INFO","timestamp":"2025-12-17T15:39:23.573Z","function":"github.com/towns-protocol/towns/core/node/rpc.(*Service).initInstance","msg":"Server config","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","config":{"Port":80,"Address":"","DisableHttps":true,"TLSConfig":{"Cert":"","TestCA":""},"Database":{"Host":"10.197.0.213","Port":5432,"User":"app_registry_service","Database":"river","Extra":"?sslmode=disable&pool_max_conns=1000","StartupDelay":2000000000,"IsolationLevel":"","NumPartitions":256,"DebugTransactions":false},"StorageType":"postgres","TrimmingBatchSize":100,"ExternalMediaStreamStorage":{"AwsS3":{"Region":"","Bucket":"","AccessKeyID":""},"Gcs":{"Bucket":""},"EnableMigrationExistingStreams":false},"BaseChain":{"ChainId":8453,"BlockTimeMs":2000,"TransactionPool":{}},"RiverChain":{"ChainId":550,"BlockTimeMs":2000,"TransactionPool":{"TransactionTimeout":6000000000,"GasFeeCap":1000000,"MinerTipFeeReplacementPercentage":10,"GasFeeIncreasePercentage":10}},"ArchitectContract":{"Address":"0x9978c826d93883701522d2ca645d5436e5654252"},"AppRegistryContract":{"Address":"0xb3173f2a02855f07a0c4bfb26d3d87c323fe42be"},"RegistryContract":{"Address":"0x1298c03fde548dc433a452573e36a713b38a0404"},"Log":{"Level":"info","File":"","FileLevel":"","Console":true,"ConsoleLevel":"","Simplify":false},"Metrics":{"Enabled":true,"DisablePublic":false,"Port":8081,"Interface":""},"PerformanceTracking":{"ProfilingEnabled":false,"TracingEnabled":false},"HighUsageDetection":{"Enabled":true,"MaxResults":50,"Thresholds":{"ThresholdAddEventWindow1":60000000000,"ThresholdAddEventCount1":50,"ThresholdAddEventWindow2":1800000000000,"ThresholdAddEventCount2":1000,"ThresholdAddMediaEventWindow1":60000000000,"ThresholdAddMediaEventCount1":50,"ThresholdAddMediaEventWindow2":1800000000000,"ThresholdAddMediaEventCount2":500,"ThresholdCreateMediaStreamWindow1":60000000000,"ThresholdCreateMediaStreamCount1":5,"ThresholdCreateMediaStreamWindow2":1800000000000,"ThresholdCreateMediaStreamCount2":100}},"Scrubbing":{"ScrubEligibleDuration":14400000000000},"StreamReconciliation":{"InitialWorkerPoolSize":4,"OnlineWorkerPoolSize":32,"GetMiniblocksPageSize":128,"ReconciliationTaskRetryDuration":120000000000},"Network":{"NumRetries":0,"RequestTimeout":0,"HttpRequestTimeout":0},"StandByOnStart":true,"StandByPollPeriod":500000000,"ShutdownTimeout":1000000000,"Graffiti":"","Archive":{"ArchiveId":"","Filter":{"Nodes":null,"FirstOnly":false,"NumShards":0,"Shards":null}},"Notifications":{"SubscriptionExpirationDuration":0,"Simulate":false,"TownsApp":{"App":"","APN":{"AppBundleID":"","Expiration":0,"KeyID":"","TeamID":""},"Web":{"Vapid":{"PublicKey":"","Subject":""}}},"SenditApp":{"App":"","APN":{"AppBundleID":"","Expiration":0,"KeyID":"","TeamID":""},"Web":{"Vapid":{"PublicKey":"","Subject":""}}},"Apps":null,"Authentication":{"ChallengeTimeout":0,"SessionToken":{"Lifetime":0}},"StreamTracking":{"StreamsPerSyncSession":0,"MaxConcurrentNodeRequests":0,"NumWorkers":0},"ColdStreamsEnabled":false},"AppRegistry":{"AppRegistryId":"app_registry","Authentication":{"ChallengeTimeout":0,"SessionToken":{"Lifetime":0}},"AllowInsecureWebhooks":false,"NumMessageSendWorkers":50,"StreamTracking":{"StreamsPerSyncSession":0,"MaxConcurrentNodeRequests":0,"NumWorkers":0},"MixpanelToken":"32076cd0239ec529020e0b1fcd65daa9","EnqueuedMessageRetention":{"TTL":86400000000000,"MaxMessagesPerBot":10000,"CleanupInterval":1800000000000}},"DisableBaseChain":false,"ChainBlocktimes":"","ChainConfigs":{},"EnableTestAPIs":false,"EnableDebugEndpoints":true,"DebugEndpoints":{"Cache":true,"Memory":true,"PProf":true,"Stacks":true,"StacksMaxSizeKb":65536,"Stream":true,"TxPool":true,"CorruptStreams":true,"EnableStorageEndpoint":true,"PrivateDebugServerAddress":"","MemProfileDir":"","MemProfileInterval":120000000000},"RiverRegistry":{"PageSize":500,"ParallelReaders":100,"MaxRetries":0,"MaxRetryElapsedTime":0,"SingleCallTimeout":60000000000,"ProgressReportInterval":10000000000},"EntitlementContract":{"Address":"0x7c0422b31401c936172c897802cf0373b35b7698"},"History":30000000000,"MetadataShardMask":1023,"TestEntitlementsBypassSecret":""},"version":"river/yoni/mixpanel/91ca9c8"}
{"level":"INFO","timestamp":"2025-12-17T15:39:23.575Z","function":"github.com/towns-protocol/towns/core/node/infra.(*MetricsPublisher).serveHttp","msg":"Starting metrics HTTP server","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","url":"http://:8081/metrics"}
{"level":"INFO","timestamp":"2025-12-17T15:39:24.377Z","function":"github.com/towns-protocol/towns/core/node/crypto.rawSettingsMap.init","msg":"Skipping unknown setting key","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","key":"61fd18391210c54b580730bba9d23b0d605f2ddfe04a7579a5d26f891a37752d","value":"0000000000000000000000000000000000000000000000000000000000000001","block":0}
{"level":"INFO","timestamp":"2025-12-17T15:39:24.378Z","function":"github.com/towns-protocol/towns/core/node/crypto.(*onChainConfiguration).processRawSettings","msg":"OnChainConfig: applied","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","settings":{"FromBlockNumber":13824246,"MediaMaxChunkCount":21,"MediaMaxChunkSize":1200000,"RecencyConstraintsAge":30000000000,"RecencyConstraintsGen":5,"ReplicationFactor":3,"MinSnapshotEvents":{"Default":100,"UserInbox":10,"UserSettings":10,"User":10,"UserDevice":10},"StreamMiniblockRegistrationFrequency":1,"StreamCacheExpiration":300000000000,"StreamCachePollIntterval":30000000000,"StreamEphemeralStreamTTL":600000000000,"GetMiniblocksMaxPageSize":0,"MembershipLimits":{"GDM":48,"DM":2},"XChain":{"Blockchains":[1,8453,137,42161,10,100]},"NodeBlocklist":["0xa7f7d83843ab78706344d3ae882b1d4f9404f254","0x01a7dcd51409758f220c171c209ef3e1c8b10f1e","0xc6cf68a1bcd3b9285fe1d13c128953a14dd1bb60"],"StreamSnapshotIntervalInMiniblocks":0,"StreamTrimActivationFactor":0,"StreamDistribution":{"ExtraCandidatesCount":0},"ServerEnableNode2NodeAuth":0,"StreamBackwardsReconciliationThreshold":50,"StreamHistoryMiniblocks":{"Default":0,"Channel":0,"DM":0,"GDM":0,"Metadata":0,"Space":400,"User":0,"UserDevice":0,"UserInbox":5000,"UserSettings":40},"StreamMaxEventsPerMiniblock":0,"StreamMaxTotalEventsSizePerMiniblock":0},"currentBlock":24923946}
{"level":"INFO","timestamp":"2025-12-17T15:39:24.585Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"WARN","timestamp":"2025-12-17T15:39:27.918Z","function":"github.com/towns-protocol/towns/core/node/rpc.(*Service).startAppRegistryMode","msg":"Minimum isolation level of postgres for app registry service is serializable, setting to serializable","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","configuredLevel":""}
{"level":"INFO","timestamp":"2025-12-17T15:39:27.931Z","function":"github.com/towns-protocol/towns/core/node/storage.(*PostgresEventStore).init","msg":"PostgresEventStore: using isolation level","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","level":"serializable"}
{"level":"INFO","timestamp":"2025-12-17T15:39:27.935Z","function":"github.com/towns-protocol/towns/core/node/storage.(*PostgresEventStore).createSchemaTx","msg":"DB Schema already exists","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","schema":"app_6170705f7265676973747279"}
{"level":"INFO","timestamp":"2025-12-17T15:39:28.079Z","function":"github.com/towns-protocol/towns/core/node/storage.(*PostgresEventStore).createSchemaTx","msg":"DB Schema already exists","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","schema":"app_6170705f7265676973747279"}
{"level":"INFO","timestamp":"2025-12-17T15:39:28.101Z","function":"github.com/towns-protocol/towns/core/node/rpc.(*Service).initAppRegistryStore","msg":"Created postgres app registry store","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","schema":"app_6170705f7265676973747279"}
{"level":"INFO","timestamp":"2025-12-17T15:39:28.313Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:28.523Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:28.741Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:28.972Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:29.181Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:29.386Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:29.599Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:29.809Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.022Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.227Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.388Z","function":"github.com/towns-protocol/towns/core/node/nodes.LoadNodeRegistry","msg":"Node Registry Loaded from contract","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","blockNum":24923946,"Nodes":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"localAddress":"0x0000000000000000000000000000000000000000"}
{"level":"ERROR","timestamp":"2025-12-17T15:39:30.389Z","function":"github.com/towns-protocol/towns/core/node/logging.(*Log).Infow","msg":"Ignored key without a value.","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","func":"AppRegistryService.Start","ignored":null}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.389Z","function":"github.com/towns-protocol/towns/core/node/app_registry.NewService","msg":"listener","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","func":"AppRegistryService.Start"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.389Z","function":"github.com/towns-protocol/towns/core/node/app_registry.NewService","msg":"creating analytics client","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","func":"AppRegistryService.Start","mixpanelToken":"32076cd0239ec529020e0b1fcd65daa9"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.390Z","function":"github.com/towns-protocol/towns/core/node/rpc.(*Service).runHttpServer","msg":"Listening","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","addr":":80"}
{"level":"WARN","timestamp":"2025-12-17T15:39:30.391Z","function":"github.com/towns-protocol/towns/core/node/rpc.(*Service).runHttpServer","msg":"Starting H2C server without TLS","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.391Z","function":"github.com/towns-protocol/towns/core/node/rpc.(*Service).startAppRegistryMode","msg":"Server started","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","port":80,"https":false,"url":"http://localhost:80"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.391Z","function":"github.com/towns-protocol/towns/core/node/app_registry.(*Service).Start.func1","msg":"Start app registry streams tracker","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","func":"AppRegistryService.Start"}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.391Z","function":"github.com/towns-protocol/towns/core/node/app_registry.(*EnqueuedMessagesCleaner).Run","msg":"Starting enqueued messages cleanup job","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","component":"EnqueuedMessagesCleaner","ttl":86400000000000,"maxMessagesPerBot":10000,"cleanupInterval":1800000000000}
{"level":"INFO","timestamp":"2025-12-17T15:39:30.506Z","function":"github.com/towns-protocol/towns/core/node/registries.(*RiverRegistryContract).forAllStreamsParallel","msg":"RiverRegistryContract: GetPaginatedStreams starting parallel read","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","numStreams":4121687,"RiverRegistry.PageSize":500,"RiverRegistry.ParallelReaders":100,"blockNum":24923946}
{"level":"INFO","timestamp":"2025-12-17T15:39:32.122Z","function":"github.com/towns-protocol/towns/core/node/crypto.(*chainMonitor).runWithBlockPeriod","msg":"process chain segment","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","from":24923946,"to":24923950}
{"level":"INFO","timestamp":"2025-12-17T15:39:40.788Z","function":"github.com/towns-protocol/towns/core/node/registries.(*RiverRegistryContract).forAllStreamsParallel","msg":"RiverRegistryContract: GetPaginatedStreams in progress","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamsRead":15000,"elapsed":10282373699,"streamPerSecond":1458.807123637104}
{"level":"INFO","timestamp":"2025-12-17T15:39:41.907Z","function":"github.com/towns-protocol/towns/core/node/track_streams.(*MultiSyncRunner).AddStream","msg":"Loaded sync cookie for historical content","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamId":"20a067347f3d7eef5cd21bc29abe79357a85a593ee03a59f760fe91e41629d8c","persistedMinipoolGen":529,"updatedAt":"2025-12-11T19:11:33.131Z"}
{"level":"INFO","timestamp":"2025-12-17T15:39:42.102Z","function":"github.com/towns-protocol/towns/core/node/track_streams.(*MultiSyncRunner).AddStream","msg":"Loaded sync cookie for historical content","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamId":"20a067347f3d7eef5cd21bc29abe79357a85a593ee0000000000000000000000","persistedMinipoolGen":3643,"updatedAt":"2025-12-17T15:19:43.207Z"}
{"level":"INFO","timestamp":"2025-12-17T15:39:42.119Z","function":"github.com/towns-protocol/towns/core/node/track_streams.(*MultiSyncRunner).AddStream","msg":"Loaded sync cookie for historical content","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamId":"20a067347f3d7eef5cd21bc29abe79357a85a593ee699dbe3a44f0ba643288fb","persistedMinipoolGen":771,"updatedAt":"2025-12-09T17:50:45.716Z"}
{"level":"INFO","timestamp":"2025-12-17T15:39:51.063Z","function":"github.com/towns-protocol/towns/core/node/registries.(*RiverRegistryContract).forAllStreamsParallel","msg":"RiverRegistryContract: GetPaginatedStreams in progress","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamsRead":30500,"elapsed":20557483709,"streamPerSecond":1483.6446148634036}
{"level":"INFO","timestamp":"2025-12-17T15:40:01.109Z","function":"github.com/towns-protocol/towns/core/node/registries.(*RiverRegistryContract).forAllStreamsParallel","msg":"RiverRegistryContract: GetPaginatedStreams in progress","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamsRead":45500,"elapsed":30602760292,"streamPerSecond":1486.7939874003573}
{"level":"INFO","timestamp":"2025-12-17T15:40:02.602Z","function":"github.com/towns-protocol/towns/core/node/track_streams.(*MultiSyncRunner).AddStream","msg":"Loaded sync cookie for historical content","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamId":"203ee7d3f840642f3e81c014845cbaa8c39adc39320000000000000000000000","persistedMinipoolGen":1330,"updatedAt":"2025-12-09T15:23:16.867Z"}
{"level":"INFO","timestamp":"2025-12-17T15:40:02.706Z","function":"github.com/towns-protocol/towns/core/node/track_streams.(*MultiSyncRunner).AddStream","msg":"Loaded sync cookie for historical content","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamId":"203ee7d3f840642f3e81c014845cbaa8c39adc393256610097112805b78b33ad","persistedMinipoolGen":135,"updatedAt":"2025-12-09T15:23:16.680Z"}
{"level":"INFO","timestamp":"2025-12-17T15:40:11.173Z","function":"github.com/towns-protocol/towns/core/node/registries.(*RiverRegistryContract).forAllStreamsParallel","msg":"RiverRegistryContract: GetPaginatedStreams in progress","instanceId":"ceaI2UN6qSjh","mode":"app_registry","nodeType":"stream","streamsRead":60500,"elapsed":40667075326,"streamPerSecond":1487.689968236296}
