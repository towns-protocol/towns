---
title: "System Requirements & Installation"
description: "This guide outlines the system requirements, dependencies, and installation details for running a Towns Stream Node in either Testnet or Mainnet."
---

<Note>
  Following these guidelines helps node operators contribute to the Towns Network's stability and efficiency. Proper node operation ensures both optimal individual performance and overall network reliability.
</Note>

<br />

### System Requirements & Dependencies

Running a Towns Stream Node requires both a Node Frontend (FE) and a Node Storage layer with Postgres database, configured for specific network settings.

Review these requirements carefully before beginning node setup:

<Accordion title="Node Frontend (FE) Requirements">
  - **CPU**: Minimum 8 virtual CPUs.
  - **Memory**: At least 16 GB of RAM.
    -Â **Architecture**: x64 or ARM64 supported.
  - **Network**: Dedicated, static public IP address, capable of handling up to 1 Gbps ingress and egress for HTTP 1.1/2
    traffic.
  - **Blockchain RPC Access**: Access to blockchain RPC provider endpoints for
    Base Chain, Towns Chain, and cross-chain chain ids.
</Accordion>

<Accordion title="Node Storage Requirements">
  - **Database Compatibility**: Postgres 15.4 or newer.
  - **Transaction Processing**: Capable of handling up to 10k IOps.
  - **Storage Capacity**: Minimum 2 TB of storage.
  - **Keypair store**: Location to store ECDSA keypair associated with the data stored in the database.

  <Note>
    For optimal resource isolation during upgrades, we strongly recommend running a separate Postgres instance for each Node FE.
  </Note>
</Accordion>

<br />

### Installation

Node FEs can be installed using either the Towns public [**ECR image registry**](https://public.ecr.aws/h5v6m2x1/river) via Docker or built from [**source code**](https://github.com/river-build/river/tree/main/core/node).

#### Installation from Docker

<Accordion title="Install Image from Towns Public Image Registry">
  The Towns Protocol maintains a public docker image registry `public.ecr.aws/h5v6m2x1/river` for images that are built officially from [source](https://github.com/river-build/river) during CI/CD.
  As such, node operators can easily install the latest Node FE software from images stored in the public ECR registry. Images are tagged during [releases](/run/release-process) with the associated commit as well as mutable tags `mainnet`, `testnet`, for each network respectively.

  ```bash
   docker pull public.ecr.aws/h5v6m2x1/river:testnet
   docker tag public.ecr.aws/h5v6m2x1/river:testnet river-node
  ```

  <Note>
    Images are tagged by their merge commit hash so to install a specific version of the Node FE software, use the commit hash from source instead of the `testnet` or `mainnet` tag, which references the latest built image.
  </Note>
  ```bash
  git clone git@github.com:river-build/river.git
  # print out shorthand commit hashes
  git log --pretty=format:'%h' | cut -c 1-7
  # choose one to pull
  COMMIT_HASH=1dd452a
  docker pull public.ecr.aws/h5v6m2x1/river:$COMMIT_HASH
  ```

  <Info>
    The CI job that builds docker images to the river public ecr registry can be found
    [here](https://github.com/river-build/river/blob/main/.github/workflows/River_node_docker.yml).
  </Info>
</Accordion>

<Accordion title="Build Docker Image from Source">
  As of October 2024, as an alternative to the public ECR registry, it is recommended to build the docker image from the source [Dockerfile](https://github.com/river-build/river/blob/main/core/Dockerfile) to ensure compatibility with the latest software version.

  ```bash
  git clone git@github.com:river-build/river.git
  cd river/core
  docker build -t river-node .
  ```
</Accordion>

<br />

### Node FE Environment Variables

Towns Stream Nodes require specific environment variables to be present and set at runtime. The configuration, described in [**config.go**](https://github.com/river-build/river/blob/main/core/config/config.go), is injected into the binary at runtime using [**viper**](https://github.com/spf13/viper).

<Note>
  For the list of contracts required to run nodes and their addresses, see [contracts](/run/contracts). 
</Note>

<br />

| Environment Variable                  | Purpose                                                | Required | Testnet Value                                                                                                | Secret |
| ------------------------------------- | ------------------------------------------------------ | -------- | ------------------------------------------------------------------------------------------------------------ | ------ |
| ARCHITECTCONTRACT__ADDRESS            | SpaceFactory contract address in Base Network          | Yes      | 0x968696BC59431Ef085441641f550C8e2Eaca8BEd                                                                   | -      |
| ARCHITECTCONTRACT__VERSION            | Contract interface version                             | Yes      | v3                                                                                                           | -      |
| BASECHAIN__CHAINID                    | Base ChainId                                           | Yes      | 84532                                                                                                        | -      |
| BASECHAIN__NETWORKURL                 | Base Chain RPC Url                                     | Yes      | https://sepolia.base.org                                                                                     | Yes    |
| CHAINSSTRING                          | List of chainIds and network RPC Urls supported        | Yes      | see [Cross-chain Requirements](/run/node-operator/system-requirements-installation#cross-chain-requirements) | -      |
| DATABASE__DATABASE                    | Postgres DB Name                                       | Yes      | river                                                                                                        | -      |
| DATABASE__EXTRA                       | Extra Postgres Options                                 | Yes      | ?sslmode=disable&pool_max_conns=1000                                                                         | -      |
| DATABASE__HOST                        | Postgres DB Host Url                                   | Yes      | -                                                                                                            | -      |
| DATABASE__PASSWORD                    | Postgres DB Password                                   | Yes      | -                                                                                                            | Yes    |
| DATABASE__PORT                        | Postgres DB port                                       | Yes      | 5432                                                                                                         | -      |
| DATABASE__USER                        | Postgres DB username                                   | Yes      | -                                                                                                            | -      |
| DD_TAGS                               | Used by Datadog for metrics collection                 | No       | env: (gamma), node_url:(your complete node url)                                                              | No     |
| ENTITLEMENT_CONTRACT__ADDRESS         | Entitlement contract address in Base Network           | Yes      | 0x08cC41b782F27d62995056a4EF2fCBAe0d3c266F                                                                   | -      |
| LOG__FORMAT                           | Log format option                                      | No       | text                                                                                                         | -      |
| LOG__LEVEL                            | Default log level                                      | No       | info                                                                                                         | -      |
| LOG__NOCOLOR                          | Logging without color                                  | No       | true                                                                                                         | -      |
| METRICS__ENABLED                      | Metrics exporter enabled                               | No       | true                                                                                                         | -      |
| METRICS__PORT                         | Metrics export port                                    | No       | 8081                                                                                                         | -      |
| PERFORMANCETRACKING__PROFILINGENABLED | Used by Datadog for cpu profiling                      | no       | true                                                                                                         | No     |
| PERFORMANCETRACKING__TRACINGENABLED   | Used by Datadog for tracing                            | no       | true                                                                                                         | No     |
| PORT                                  | Port RPC service listens on                            | Yes      | 443                                                                                                          | -      |
| REGISTRYCONTRACT__ADDRESS             | River Registry contract address in Towns Chain Network | Yes      | 0xf18E98D36A6bd1aDb52F776aCc191E69B491c070                                                                   | -      |
| RIVERCHAIN__CHAINID                   | Towns Chain chainId                                    | Yes      | 6524490                                                                                                      | -      |
| RIVERCHAIN__NETWORKURL                | Towns Chain RPC Url                                    | Yes      | https://testnet.rpc.towns.com/http                                                                           | Yes    |
| RUN_MODE                              | Stream Node Run Mode (full, archive)                   | No       | full                                                                                                         | -      |
| SKIP_GENKEY                           | Skip generating node ECDSA wallet keypair              | Yes      | true                                                                                                         | -      |
| STANDBYONSTART                        | Start node in standby mode                             | No       | false                                                                                                        | -      |
| STORAGE_TYPE                          | postgres or in-memory                                  | No       | postgres                                                                                                     | -      |
| TLSCONFIG__CERT                       | TLS certificate value for node hostname                | Yes      | -                                                                                                            | Yes    |
| TLSCONFIG__KEY                        | TLS certificate key for node hostname                  | Yes      | -                                                                                                            | Yes    |
| WALLETPRIVATEKEY                      | Node ECDSA private key string                          | Yes      | -                                                                                                            | Yes    |

<Note>
  The testnet values shown above are current as of May 2024. You can find updated contract addresses in **packages/generated/**** of the river repo.
</Note>

<Warning>
  Environment variables marked as Secret must be stored and managed securely. Node operators should choose an appropriate secure storage solution based on their runtime environment, whether cloud or on-premise.
</Warning>

### Cross-chain Requirements

The `CHAINSSTRING` environment variable is required for cross-chain entitlement checks. It contains a comma-separated, colon-delimited list of chain IDs and RPC URLs. As of June 2024, the Towns network requires support for specific chainIds in testnet and mainnet, as listed in the tables below.

Here's an example of the `CHAINSSTRING` environment variable for Mainnet, using redacted RPC URLs from Web3 providers:

```
1:https://eth-mainnet.g.alchemy.com/v2/$ETHEREUM_API_KEY,8453:https://base-mainnet.g.alchemy.com/v2/$BASE_API_KEY,42161:https://arb-mainnet.g.alchemy.com/v2/$ARBITRUM_MAINNET_API_KEY,137:https://polygon-mainnet.g.alchemy.com/v2/$POLYGON_API_KEY,10:https://opt-mainnet.g.alchemy.com/v2/$OPTIMISM_API_KEY
```

<Warning>
  Do not use public RPC provider urls found on [chainlist](https://chainlist.org/) or elsewhere as these are notoriously unstable. Node Operators are encouraged to provision RPC Urls for high availability for each supported chainId by using custom provisioned provider urls from [Alchemy](https://www.alchemy.com/) or [Infura](https://www.infura.io/).
</Warning>

### Testnet Cross-Chain Chain Ids Required

On testnet, nodes should support the following chain ids with configured RPC endpoints for cross-chain entitlement checks.

| Chain Id | Network          |
| -------- | ---------------- |
| 1        | Ethereum Mainnet |
| 11155111 | Ethereum Sepolia |
| 8453     | Base Mainnet     |
| 84532    | Base Sepolia     |
| 42161    | Arbitrum One     |
| 137      | Polygon Mainnet  |
| 10       | Optimism Mainnet |
| 10200    | Gnosis Chiado    |

### Mainnet Cross-Chain Chain Ids Required

On mainnet, nodes should support the following 6 chain ids for cross-chain entitlement checks.

| Chain Id | Network          |
| -------- | ---------------- |
| 1        | Ethereum Mainnet |
| 8453     | Base Mainnet     |
| 42161    | Arbitrum One     |
| 137      | Polygon Mainnet  |
| 10       | Optimism Mainnet |
| 100      | Gnosis           |