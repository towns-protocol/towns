import React, { HTMLAttributes, forwardRef, useEffect, useRef } from 'react'
import { MotionBox } from '@ui'
import { atoms } from 'ui/styles/atoms.css'

export const Logo = forwardRef<SVGSVGElement, HTMLAttributes<SVGSVGElement>>((props, ref) => {
    const gradientRef = useRef<SVGLinearGradientElement>(null)
    useEffect(() => {
        let raf: number

        const update = () => {
            raf = requestAnimationFrame(update)
            gradientRef.current?.setAttribute(
                'gradientTransform',
                // timebased animation in order to keep the gradient angle
                // consistent between components
                `rotate(${((Date.now() % 4000) / 4000) * 360}, 125, 31)`,
            )
        }
        update()
        return () => {
            cancelAnimationFrame(raf)
        }
    }, [])

    return (
        <svg
            width="250"
            height="62"
            viewBox="0 0 250 62"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            {...props}
            ref={ref}
        >
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M58.1117 3.7891C56.6721 2.12049 54.542 1.06432 52.1653 1.06432H20.2889C19.6624 1.06432 19.0531 1.13769 18.4691 1.27631C16.7278 1.45403 15.0991 2.31555 13.9692 3.71444C13.9692 3.71444 2.43293 18.8969 1.47714 20.0803C0.521345 21.2637 0 22.7388 0 24.26V34.0316C0 35.7958 0.700834 37.4877 1.94833 38.7352L3.53062 40.3175C4.67737 41.4643 6.23268 42.1085 7.85442 42.1085C11.2315 42.1085 13.9692 44.8462 13.9692 48.2233V53.2178C13.9692 54.982 14.2159 57.2386 15.7701 59.042C17.2736 60.7865 19.1168 61.672 21.0483 61.672H223.96C227.928 61.672 232.099 59.4934 234.298 57.9479C236.497 56.4025 243.976 46.568 246.183 43.4853C248.39 40.4026 250 36.934 250 32.9155V29.8822C250 27.2771 249.194 24.8547 247.817 22.8518C249.223 21.3873 250.067 19.3564 249.888 17.0285C249.388 10.5235 247.147 5.80625 242.954 3.01047C239.188 0.499104 234.705 0.226854 231.801 0.0615997L231.654 0.0532152H214.796C210.371 0.0532152 206.24 1.83057 203.143 4.82237C201.764 2.56836 199.279 1.06432 196.443 1.06432H186.864C184.133 1.06432 181.728 2.4583 180.322 4.57343C178.867 2.38187 176.411 1.06432 173.781 1.06432H161.48C159.979 1.06432 158.577 1.4853 157.385 2.21559C156.205 1.48992 154.808 1.06432 153.281 1.06432H145.797C142.443 1.06432 139.459 3.19595 138.371 6.36941L138.365 6.38562C137.294 3.23098 134.32 1.06432 130.933 1.06432H125.623C122.235 1.06432 119.262 3.23099 118.19 6.38564L118.185 6.3694C117.097 3.19595 114.113 1.06432 110.758 1.06432H103.275C101.019 1.06432 99.0444 1.99382 97.6393 3.44768L97.4317 3.42052C94.6256 1.27342 91.1221 0 87.3389 0H68.7133C64.7584 0 61.0626 1.38717 58.1117 3.7891ZM87.3388 5.19043H68.7132C65.6267 5.19043 62.753 6.4144 60.5712 8.54304C58.4425 10.6717 57.2185 13.5986 57.2718 16.6319V32.916C57.2185 35.9493 58.4425 38.8229 60.5712 41.0048C62.753 43.1334 65.6799 44.3574 68.7132 44.3574H87.3388C93.6183 44.3574 98.7802 39.1955 98.7802 32.916V16.6319C98.7802 10.2992 93.6183 5.19043 87.3388 5.19043ZM83.8265 28.7651C83.8265 30.8405 82.1236 32.5435 80.0482 32.5435H75.9506C73.8752 32.5435 72.1722 30.8405 72.1722 28.7651V20.7827C72.1722 18.7073 73.8752 17.0044 75.9506 17.0044H80.0482C82.1236 17.0044 83.8265 18.7073 83.8265 20.7827V28.7651ZM20.2887 6.25475C18.8192 6.25475 17.6279 7.44603 17.6279 8.91555V16.3658C17.6279 17.8353 18.8192 19.0266 20.2887 19.0266H26.0722C27.5417 19.0266 28.733 20.2179 28.733 21.6874V41.2234C28.733 42.6929 29.9242 43.8842 31.3938 43.8842H41.0601C42.5296 43.8842 43.7209 42.6929 43.7209 41.2234V21.6874C43.7209 20.2179 44.9122 19.0266 46.3817 19.0266H52.1651C53.6346 19.0266 54.8259 17.8353 54.8259 16.3658V8.91555C54.8259 7.44603 53.6346 6.25475 52.1651 6.25475H20.2887ZM143.28 8.05277C143.649 6.97721 144.66 6.25475 145.797 6.25475H153.28C155.116 6.25475 156.401 8.06979 155.79 9.80092L144.523 41.7305C144.148 42.7944 143.142 43.5059 142.014 43.5059H132.658C131.828 43.5059 131.072 43.0631 130.657 42.3686C130.502 42.1096 130.446 41.8064 130.409 41.5069C130.064 38.699 129.728 37.1239 128.333 37.1239C126.937 37.1239 126.49 38.6723 126.136 41.5112C126.099 41.8053 126.045 42.1032 125.895 42.3589C125.485 43.06 124.727 43.5059 123.893 43.5059H114.542C113.413 43.5059 112.408 42.7944 112.032 41.7305L100.766 9.80093C100.155 8.06979 101.439 6.25475 103.275 6.25475H110.758C111.895 6.25475 112.906 6.97721 113.275 8.05277L116.104 16.3058C116.97 18.8313 120.6 18.6509 121.211 16.052L123.032 8.30653C123.315 7.10441 124.388 6.25475 125.623 6.25475H130.933C132.168 6.25475 133.24 7.10441 133.523 8.30653L135.344 16.052C135.955 18.6509 139.586 18.8313 140.451 16.3058L143.28 8.05277ZM186.864 6.25475C185.394 6.25475 184.203 7.44603 184.203 8.91555V10.9935C184.203 13.6299 180.78 14.661 179.324 12.4634L175.998 7.44563C175.506 6.70192 174.673 6.25475 173.781 6.25475H161.479C160.01 6.25475 158.819 7.44603 158.819 8.91555V40.8984C158.819 42.3679 160.01 43.5592 161.479 43.5592H171.484C172.954 43.5592 174.145 42.3679 174.145 40.8984V35.4152C174.145 32.6805 177.775 31.7249 179.122 34.1053L183.705 42.2083C184.177 43.0431 185.062 43.5592 186.021 43.5592H196.442C197.912 43.5592 199.103 42.3679 199.103 40.8984V8.91555C199.103 7.44603 197.912 6.25475 196.442 6.25475H186.864ZM219.392 21.2824C219.484 21.3089 219.578 21.318 219.673 21.3246C220.489 21.3806 224.749 21.6722 229.909 22.0067C231.772 22.1587 233.77 22.3108 235.769 22.4628C236.568 22.5236 237.367 22.5845 238.158 22.6453C241.883 22.9646 244.81 26.1043 244.81 29.8827V32.916C244.81 39.1955 239.701 44.3042 233.368 44.3042H213.891C207.612 44.3042 203.408 39.1955 203.408 32.916V32.1177C203.408 30.6482 204.599 29.4569 206.069 29.4569H215.78C216.571 29.4569 217.499 29.8028 218.428 30.1487C219.357 30.4946 220.285 30.8405 221.076 30.8405H228.1C229.649 30.8405 230.096 28.636 228.76 28.262C228.676 28.2385 228.59 28.2296 228.503 28.2227C227.708 28.1595 223.351 27.809 218.255 27.3283C217.717 27.2766 217.172 27.2249 216.622 27.1728L216.619 27.1726L216.619 27.1725C214.34 26.9566 211.99 26.734 209.847 26.4768C206.175 26.0511 203.355 22.9646 203.408 19.2927V16.6851C203.355 13.6518 204.579 10.7249 206.707 8.59625C208.889 6.46761 211.763 5.24365 214.796 5.24365H231.506C237.594 5.59012 243.866 6.39694 244.713 17.4265C244.826 18.8917 243.619 20.0909 242.149 20.0909H232.43C231.632 20.0909 230.696 19.7583 229.759 19.4257C228.823 19.0931 227.887 18.7605 227.089 18.7605H220.064C218.52 18.7605 218.071 20.9016 219.392 21.2824Z"
                fill="url(#paint0_linear_9353_287531)"
            />
            <defs>
                <linearGradient
                    ref={gradientRef}
                    id="paint0_linear_9353_287531"
                    x1="-0.138776"
                    y1="30.7292"
                    x2="250.062"
                    y2="30.7293"
                    gradientUnits="userSpaceOnUse"
                >
                    <stop stopColor="#17DCF7" />
                    <stop offset="0.552083" stopColor="#FFAA29" />
                    <stop offset="1" stopColor="#FF25E9" />
                </linearGradient>
            </defs>
        </svg>
    )
})

export const TransitionLogo = () => (
    <MotionBox
        layout="position"
        layoutId="logo"
        initial={false}
        exit={{
            opacity: 0,
            scale: 0.95,
            transition: {
                ease: 'easeIn',
                delay: 0.4,
                duration: 0.4,
                layout: {
                    type: 'spring',
                },
            },
        }}
    >
        <Logo className={atoms({ height: 'x8' })} />
    </MotionBox>
)

export const MinimalLogo = forwardRef<SVGSVGElement, HTMLAttributes<SVGSVGElement>>(
    (props, ref) => (
        <svg
            viewBox="0 0 200 66"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            {...props}
            ref={ref}
        >
            <circle cx="33" cy="33" r="33" fill="url(#paint0_linear_1205_31033)" />
            <defs>
                <linearGradient
                    id="paint0_linear_1205_31033"
                    x1="107.232"
                    y1="38.2975"
                    x2="107.232"
                    y2="67.4037"
                    gradientUnits="userSpaceOnUse"
                >
                    <stop stopColor="#C9356A" />
                    <stop offset="0.364583" stopColor="#BB1B1B" />
                    <stop offset="1" stopColor="#FA773F" />
                </linearGradient>
            </defs>
        </svg>
    ),
)
