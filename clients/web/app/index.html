<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no, shrink-to-fit=no"
    />
    <meta property="og:title" content="__title__" />
    <meta property="og:description" content="__description__" />
    <meta property="og:image" content="__image__" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@townsxyz" />
    <meta name="twitter:title" content="__title__" />
    <meta name="twitter:description" content="__description__" />
    <meta name="twitter:image" content="__image__" />
    <meta name="apple-itunes-app" content="app-id=6504000393" />

    <!--app-head-->
    <title>__title__</title>
    <link rel="icon" href="/favicon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="icon" href="/pwa/maskable_icon_x192.png" />
    <link rel="mask-icon" href="/pwa/maskable_icon_x192.png" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <style>
      body {
        background-color: hsl(260, 5%, 17%);
      }
      @media screen and (prefers-color-scheme: light) {
        body {
          background-color: hsla(0, 0%, 92%, 1);
        }
      }
    </style>
    <script>
      document.title = document.title.match(/__title__/)
        ? "Towns"
        : document.title;
    </script>
    <script type="module">
      window.onload = function () {
        var host = window.location.hostname;
        var favicon = document.querySelector(
          'link[rel="icon"][href="/favicon.png"]',
        );
        if (favicon) {
          if (host === "app.alpha.towns.com") {
            favicon.href = "/favicon-teal.png";
          } else if (host === "app.gamma.towns.com") {
            favicon.href = "/favicon-blue.png";
          } else if (host === "localhost") {
            favicon.href = "/favicon-green.png";
          }
        }
      };
    </script>
    <script>
      window.rudderanalytics = [];
      var methods = [
        "load",
        "page",
        "track",
        "identify",
        "alias",
        "group",
        "ready",
        "reset",
        "getAnonymousId",
        "setAnonymousId",
        "getUserId",
        "getUserTraits",
        "getGroupId",
        "getGroupTraits",
        "startSession",
        "endSession",
        "getSessionId",
      ];
      for (var i = 0; i < methods.length; i++) {
        var method = methods[i];
        window.rudderanalytics[method] = (function (methodName) {
          return function () {
            window.rudderanalytics.push(
              [methodName].concat(Array.prototype.slice.call(arguments)),
            );
          };
        })(method);
      }
    </script>
    <script>
      const matchTownsChannel = new RegExp(
        `^/t/([a-f0-9]{64})/channels/([a-f0-9]{64})(?:/|$)`,
        "i",
      );
      if (matchTownsChannel.test(window.location.pathname)) {
        window.townsAppStartTime = Date.now();
        window.townsMeasureFlag = true;
      }
    </script>
    <script>
      window.__SSR__ = `__ssr__`;
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/index.tsx"></script>
  </body>
</html>
